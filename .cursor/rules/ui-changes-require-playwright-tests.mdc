---
description: Validation obligatoire via navigateur int√©gr√© (MCP Playwright) apr√®s toute modification d'interface
alwaysApply: true
---

# R√®gle ‚Äî Validation navigateur obligatoire apr√®s chaque changement UI

D√®s qu'un changement touche l'interface (ajout/modif de bouton, champ, formulaire, composant, page, style), vous **devez imm√©diatement valider** le comportement via le **navigateur int√©gr√© MCP Playwright**.

## ‚ö†Ô∏è R√àGLE ABSOLUE : V√©rification console OBLIGATOIRE

**TOUTE modification UI DOIT √™tre suivie d'une v√©rification de la console navigateur.**
- ‚ùå **INTERDIT** : Terminer une modification UI sans v√©rifier la console
- ‚ùå **INTERDIT** : Consid√©rer une t√¢che "termin√©e" si la console n'a pas √©t√© v√©rifi√©e
- ‚úÖ **OBLIGATOIRE** : Capturer les logs console (`console_logs` type: "error") apr√®s chaque modification
- ‚úÖ **OBLIGATOIRE** : Confirmer **0 erreur console** avant de consid√©rer la t√¢che termin√©e
- ‚úÖ **OBLIGATOIRE** : Si erreurs d√©tect√©es ‚Üí corriger ‚Üí RE-V√âRIFIER jusqu'√† 0 erreur

**Cette v√©rification n'est PAS optionnelle. C'est une √©tape obligatoire du workflow.**

## Distinction importante

- ‚úÖ **Navigateur int√©gr√© (MCP Playwright)** : **OBLIGATOIRE** pour validation interactive
- ‚öôÔ∏è **Tests automatis√©s Playwright** : **OPTIONNELS** (sauf parcours critiques ou demande explicite)

Voir [browser-validation-strategy.mdc](mdc:browser-validation-strategy.mdc) pour la strat√©gie compl√®te.

## Proc√©dure de validation (obligatoire)

### 1. D√©marrer l'application
- `npm run dev` ou `bun dev` (Vite sur `http://localhost:5173`)
- Confirmer que l'app est accessible

### 2. Utiliser le navigateur int√©gr√© (MCP Playwright)
- Naviguer vers la page modifi√©e : `mcp_playwright_playwright_navigate`
- Interagir avec les √©l√©ments modifi√©s : `click`, `fill`, `select`, etc.
- **üî¥ √âTAPE OBLIGATOIRE** : Capturer les logs console : `mcp_playwright_playwright_console_logs` (type: "error")
  - **‚ö†Ô∏è Objectif : 0 erreur console**
  - **‚ö†Ô∏è Si erreurs pr√©sentes ‚Üí CORRIGER imm√©diatement ‚Üí RE-V√âRIFIER**
- Prendre des captures d'√©cran : `mcp_playwright_playwright_screenshot`

### 3. V√©rifier
- ‚úÖ √âl√©ment visible et fonctionnel
- ‚úÖ Interaction produit l'effet attendu (toast, navigation, √©tat DOM, etc.)
- ‚úÖ **üî¥ Aucune erreur dans la console navigateur (OBLIGATOIRE)**
- ‚úÖ Accessibilit√© de base (focus clavier atteignable)

### 4. Corriger si n√©cessaire
- Si des erreurs console sont pr√©sentes ‚Üí corriger le code **IMM√âDIATEMENT**
- **OBLIGATOIRE** : Recharger la page et **RE-CAPTURER** les logs console : `console_logs` (type: "error")
- **OBLIGATOIRE** : Confirmer **0 erreur** avant de continuer
- It√©rer jusqu'√† validation compl√®te (corriger ‚Üí v√©rifier ‚Üí corriger ‚Üí v√©rifier)

### 4bis. Cas sp√©cial : Erreur console copi√©e-coll√©e par l'utilisateur
**‚ö†Ô∏è R√àGLE OBLIGATOIRE** : Quand l'utilisateur copie-colle une erreur console d√©tect√©e pendant ses tests, apr√®s correction, vous **DEVEZ** automatiquement :
1. Naviguer vers la page concern√©e avec MCP Playwright
2. Reproduire le sc√©nario qui d√©clenchait l'erreur (m√™me interactions utilisateur)
3. Capturer les logs console (`console_logs` type: "error")
4. **Confirmer que l'erreur ne se reproduit plus** (0 erreur attendue)
5. Si l'erreur persiste ‚Üí it√©rer jusqu'√† r√©solution compl√®te

**Objectif** : √âviter que l'utilisateur doive copier-coller la m√™me erreur plusieurs fois. La correction doit √™tre valid√©e imm√©diatement via les tests UI.

### 5. Documenter
- Mentionner dans le commit/PR que la validation MCP a √©t√© effectu√©e
- Joindre des captures si pertinent
- Si des erreurs ont √©t√© corrig√©es, documenter le correctif

## Checklist de validation (√† respecter OBLIGATOIREMENT)

**‚ö†Ô∏è Cette checklist DOIT √™tre compl√©t√©e pour chaque modification UI. Aucune exception.**

- [ ] Application lanc√©e localement (`npm run dev` ou `bun dev`)
- [ ] Navigation vers la page/composant modifi√© via MCP Playwright (`playwright_navigate`)
- [ ] Interaction avec les √©l√©ments ajout√©s/modifi√©s (`click`, `fill`, etc.)
- [ ] **üî¥ OBLIGATOIRE : Capture des logs console** (`console_logs` type: "error")
- [ ] **üî¥ OBLIGATOIRE : Confirmation 0 erreur console** (si erreurs ‚Üí corriger ‚Üí RE-V√âRIFIER)
- [ ] Captures d'√©cran des √©tats cl√©s (`screenshot`)
- [ ] Effet attendu v√©rifi√© (toast, navigation, donn√©es, etc.)
- [ ] Accessibilit√© de base v√©rifi√©e (focus, labels)
- [ ] **Si erreurs d√©tect√©es** : Corrections appliqu√©es ‚Üí **RE-CAPTURE console** ‚Üí Confirmation 0 erreur
- [ ] Re-validation apr√®s correction (si applicable)

**Rappel** : La v√©rification console n'est PAS optionnelle. Une modification UI n'est pas termin√©e tant que la console n'a pas √©t√© v√©rifi√©e et confirm√©e √† 0 erreur.

## Tests automatis√©s (optionnels)

Les tests automatis√©s Playwright (`tests/ui/**/*.spec.ts`) sont **optionnels** sauf si :
- Parcours critique m√©tier (auth, CRUD principal)
- Feature stable n√©cessitant une non-r√©gression
- Requis explicitement par la DoD ou le QA
- Demande explicite de l'√©quipe

Voir [ui-testing-automated.mdc](mdc:ui-testing-automated.mdc) pour les tests automatis√©s.

## R√©f√©rences
- Strat√©gie globale : [browser-validation-strategy.mdc](mdc:browser-validation-strategy.mdc)
- Outils MCP disponibles : [ui-browser-interactive.mdc](mdc:ui-browser-interactive.mdc)
- Tests automatis√©s : [ui-testing-automated.mdc](mdc:ui-testing-automated.mdc)

