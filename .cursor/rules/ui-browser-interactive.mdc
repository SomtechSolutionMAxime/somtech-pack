---
description: Outils du navigateur int√©gr√© (MCP Playwright) pour validation interactive et d√©bogage
alwaysApply: false
---

# Navigateur int√©gr√© ‚Äî Outils MCP Playwright

Ce document liste tous les outils disponibles via le **navigateur int√©gr√© MCP Playwright** pour la validation interactive, l'exploration et le d√©bogage d'interface.

**Usage** : Validation manuelle, d√©bogage, exploration. Pour les tests automatis√©s, voir [ui-testing-automated.mdc](mdc:ui-testing-automated.mdc).

## üåê Navigation et contr√¥le

### `mcp_playwright_playwright_navigate`
Naviguer vers une URL (d√©marre le navigateur si n√©cessaire).

```typescript
{
  url: string,                    // URL cible
  browserType?: 'chromium' | 'firefox' | 'webkit',  // D√©faut: chromium
  headless?: boolean,             // D√©faut: false (navigateur visible)
  width?: number,                 // Largeur viewport (d√©faut: 1280)
  height?: number,                // Hauteur viewport (d√©faut: 720)
  timeout?: number,               // Timeout navigation (ms)
  waitUntil?: string              // Condition d'attente (load, domcontentloaded, networkidle)
}
```

**Exemples** :
```typescript
// Desktop
navigate({ url: 'http://localhost:5173/desktop' })

// Mobile
navigate({ url: 'http://localhost:5173/mobile', width: 430, height: 900 })
```

### `mcp_playwright_playwright_go_back` / `mcp_playwright_playwright_go_forward`
Navigation dans l'historique du navigateur.

### `mcp_playwright_playwright_close`
Fermer le navigateur et lib√©rer les ressources.

### `mcp_playwright_playwright_custom_user_agent`
D√©finir un User Agent personnalis√©.

```typescript
{ userAgent: string }
```

## üñ±Ô∏è Interaction

### `mcp_playwright_playwright_click`
Cliquer sur un √©l√©ment.

```typescript
{ selector: string }  // CSS selector, data-testid, ou r√¥le ARIA
```

**Exemples** :
```typescript
click({ selector: '[data-testid="btn-save"]' })
click({ selector: 'button:has-text("Enregistrer")' })
```

### `mcp_playwright_playwright_fill`
Remplir un champ de formulaire.

```typescript
{ 
  selector: string,
  value: string 
}
```

**Exemple** :
```typescript
fill({ selector: '[data-testid="input-name"]', value: 'John Doe' })
```

### `mcp_playwright_playwright_select`
S√©lectionner une option dans un `<select>`.

```typescript
{ 
  selector: string,
  value: string 
}
```

### `mcp_playwright_playwright_hover`
Survoler un √©l√©ment (pour tester les tooltips, menus d√©roulants).

```typescript
{ selector: string }
```

### `mcp_playwright_playwright_press_key`
Appuyer sur une touche du clavier.

```typescript
{ 
  key: string,           // 'Enter', 'ArrowDown', 'Escape', 'a', etc.
  selector?: string      // Focus sur un √©l√©ment avant de presser
}
```

**Exemples** :
```typescript
press_key({ key: 'Enter', selector: '[data-testid="input-search"]' })
press_key({ key: 'Escape' })  // Sans s√©lecteur (action globale)
```

### `mcp_playwright_playwright_drag`
Glisser-d√©poser un √©l√©ment.

```typescript
{ 
  sourceSelector: string,
  targetSelector: string 
}
```

### `mcp_playwright_playwright_upload_file`
Uploader un fichier dans un `<input type="file">`.

```typescript
{ 
  selector: string,
  filePath: string      // Chemin absolu vers le fichier
}
```

## üì∏ Inspection et capture

### `mcp_playwright_playwright_screenshot`
Prendre une capture d'√©cran.

```typescript
{ 
  name: string,                   // Nom du fichier (obligatoire)
  fullPage?: boolean,             // Capture pleine page (d√©faut: false)
  selector?: string,              // Capturer un √©l√©ment sp√©cifique
  savePng?: boolean,              // Sauvegarder en PNG (d√©faut: false)
  storeBase64?: boolean,          // Stocker en base64 (d√©faut: true)
  downloadsDir?: string,          // R√©pertoire de t√©l√©chargement
  width?: number,                 // Largeur (d√©faut: 800)
  height?: number                 // Hauteur (d√©faut: 600)
}
```

**Exemples** :
```typescript
// Capture pleine page
screenshot({ name: 'clients-page', fullPage: true })

// Capture d'un √©l√©ment
screenshot({ name: 'form-client', selector: '[data-testid="form-client"]' })
```

### `mcp_playwright_playwright_console_logs`
**üî¥ ESSENTIEL pour d√©bogage** ‚Äî R√©cup√©rer les logs de la console navigateur.

```typescript
{ 
  type?: 'all' | 'error' | 'warning' | 'log' | 'info' | 'debug' | 'exception',
  search?: string,          // Filtrer par texte
  limit?: number,           // Limiter le nombre de logs
  clear?: boolean           // Effacer les logs apr√®s r√©cup√©ration (d√©faut: false)
}
```

**Exemples** :
```typescript
// Tous les logs d'erreur
console_logs({ type: 'error' })

// Recherche sp√©cifique
console_logs({ type: 'all', search: 'useQuery' })

// Limiter √† 50 logs
console_logs({ type: 'all', limit: 50 })
```

**Usage critique** : Toujours capturer les logs apr√®s chaque modification UI pour confirmer **0 erreur console**.

### `mcp_playwright_playwright_get_visible_html`
R√©cup√©rer le HTML visible de la page.

```typescript
{ 
  selector?: string,          // Limiter √† un conteneur
  removeScripts?: boolean,    // Supprimer les <script> (d√©faut: true)
  removeStyles?: boolean,     // Supprimer les <style> (d√©faut: false)
  removeComments?: boolean,   // Supprimer les commentaires (d√©faut: false)
  removeMeta?: boolean,       // Supprimer les <meta> (d√©faut: false)
  cleanHtml?: boolean,        // Nettoyage complet (d√©faut: false)
  minify?: boolean,           // Minifier le HTML (d√©faut: false)
  maxLength?: number          // Limite de caract√®res (d√©faut: 20000)
}
```

### `mcp_playwright_playwright_get_visible_text`
R√©cup√©rer le texte visible de la page.

### `mcp_playwright_playwright_evaluate`
Ex√©cuter du JavaScript dans le contexte de la page.

```typescript
{ script: string }
```

**Exemples** :
```typescript
// D√©finir une variable localStorage
evaluate({ script: 'localStorage.setItem("app_role", "admin")' })

// Lire l'√©tat d'un composant
evaluate({ script: 'document.querySelector("[data-testid=btn-save]").disabled' })

// Scroll
evaluate({ script: 'window.scrollTo(0, document.body.scrollHeight)' })
```

## üåç R√©seau et HTTP

### `mcp_playwright_playwright_expect_response`
Commencer √† attendre une r√©ponse HTTP (non bloquant).

```typescript
{ 
  id: string,           // Identifiant unique pour retrouver la r√©ponse
  url: string           // Pattern d'URL √† matcher
}
```

### `mcp_playwright_playwright_assert_response`
Attendre et valider une r√©ponse HTTP pr√©c√©demment initi√©e.

```typescript
{ 
  id: string,           // ID d√©fini dans expect_response
  value?: string        // Contenu attendu dans le body
}
```

**Exemple** :
```typescript
// 1. Initier l'attente
expect_response({ id: 'create-client', url: '/api/clients' })

// 2. D√©clencher l'action
click({ selector: '[data-testid="btn-save"]' })

// 3. Valider la r√©ponse
assert_response({ id: 'create-client', value: '"success":true' })
```

### Requ√™tes HTTP directes

- `mcp_playwright_playwright_get` : GET request
- `mcp_playwright_playwright_post` : POST request (avec body, headers, token)
- `mcp_playwright_playwright_put` : PUT request
- `mcp_playwright_playwright_patch` : PATCH request
- `mcp_playwright_playwright_delete` : DELETE request

```typescript
get({ url: 'https://api.example.com/data' })
post({ url: 'https://api.example.com/create', value: '{"name":"test"}', token: 'Bearer xxx' })
```

## üìÑ Export et sauvegarde

### `mcp_playwright_playwright_save_as_pdf`
Sauvegarder la page en PDF.

```typescript
{ 
  outputPath: string,           // R√©pertoire de sortie (obligatoire)
  filename?: string,            // Nom du fichier (d√©faut: page.pdf)
  format?: string,              // Format page ('A4', 'Letter', etc.)
  printBackground?: boolean,    // Imprimer l'arri√®re-plan
  margin?: {
    top?: string,
    right?: string,
    bottom?: string,
    left?: string
  }
}
```

## ü™ü Gestion des onglets

### `mcp_playwright_playwright_click_and_switch_tab`
Cliquer sur un lien et basculer vers le nouvel onglet ouvert.

```typescript
{ selector: string }
```

## üé≠ Iframes

### `mcp_playwright_playwright_iframe_click`
Cliquer sur un √©l√©ment dans un iframe.

```typescript
{ 
  iframeSelector: string,
  selector: string 
}
```

### `mcp_playwright_playwright_iframe_fill`
Remplir un champ dans un iframe.

```typescript
{ 
  iframeSelector: string,
  selector: string,
  value: string 
}
```

## üîß Workflows types

### Validation UI apr√®s modification
**üî¥ OBLIGATOIRE : V√©rifier la console apr√®s chaque modification UI**

```
1. navigate({ url: 'http://localhost:5173/clients' })
2. click({ selector: '[data-testid="btn-add-client"]' })
3. fill({ selector: '[data-testid="input-name"]', value: 'Test Client' })
4. click({ selector: '[data-testid="btn-save"]' })
5. üî¥ OBLIGATOIRE : console_logs({ type: 'error' })  ‚Üí Confirmer 0 erreur
6. Si erreurs d√©tect√©es ‚Üí Corriger ‚Üí Recharger ‚Üí RE-CAPTURER console ‚Üí Confirmer 0 erreur
7. screenshot({ name: 'client-created', fullPage: true })

‚ö†Ô∏è NE PAS TERMINER SANS AVOIR V√âRIFI√â LA CONSOLE ET CONFIRM√â 0 ERREUR
```

### D√©bogage d'erreur console

#### Cas 1 : Erreur copi√©e-coll√©e par l'utilisateur (pendant ses tests)
**‚ö†Ô∏è R√àGLE OBLIGATOIRE** : Apr√®s correction, revalider automatiquement avec les tests UI.

```
1. Utilisateur copie-colle une erreur console (ex: "POST /api/clients 500", erreur r√©seau, etc.)
2. Analyser l'erreur et identifier la cause
3. Corriger le code
4. **OBLIGATOIRE** : Revalider automatiquement :
   a. navigate({ url: 'http://localhost:5173/page-concern√©e' })
   b. Reproduire le sc√©nario qui d√©clenchait l'erreur :
      - click({ selector: '[data-testid="btn-submit"]' })
      - fill({ selector: '[data-testid="input-name"]', value: 'Test' })
      - (toutes les interactions n√©cessaires pour reproduire l'erreur)
   c. console_logs({ type: 'error' })  ‚Üí Confirmer 0 erreur ‚úÖ
5. Si l'erreur persiste ‚Üí it√©rer jusqu'√† r√©solution
6. Documenter la correction et la validation
```

#### Cas 2 : Erreur d√©tect√©e proactivement
```
1. navigate({ url: 'http://localhost:5173/problematic-page' })
2. console_logs({ type: 'error' })  ‚Üí Identifier les erreurs
3. get_visible_html({ selector: '[data-testid="error-component"]' })
4. ‚Üí Corriger le code
5. navigate({ url: 'http://localhost:5173/problematic-page' })  # Recharger
6. console_logs({ type: 'error' })  ‚Üí Confirmer 0 erreur ‚úÖ
```

### Exploration d'une nouvelle page web
```
1. navigate({ url: 'https://example.com' })
2. screenshot({ name: 'example-homepage', fullPage: true })
3. get_visible_text()  ‚Üí Analyser le contenu
4. click({ selector: 'nav a:has-text("About")' })
5. get_visible_html({ selector: 'main' })
```

## R√©f√©rences
- Strat√©gie globale : [browser-validation-strategy.mdc](mdc:browser-validation-strategy.mdc)
- Validation apr√®s modif UI : [ui-changes-require-playwright-tests.mdc](mdc:ui-changes-require-playwright-tests.mdc)
- Tests automatis√©s : [ui-testing-automated.mdc](mdc:ui-testing-automated.mdc)
